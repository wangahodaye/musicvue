webpackJsonp([3],{"0IpB":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),o=s.n(i),n=s("btxw"),r=(s("y/jF"),s("3Q4o"),{data:function(){return{colors:{color:"#ffcd32"},showoffset:!1,offsettoplist:[],currentitem:"",offsettopabsolate:{left:"0px",top:"0px"}}},mounted:function(){var t=this;t.scroll=new n.a(t.$refs.singerlistview,{probeType:2,mouseWheel:!0,click:!0,tap:!0}),console.log("this_.$refs.singerlistview",t.$refs.singerlistview),t.scroll.refresh(),t.scroll.on("scroll",function(e){console.log("this_.scroll:",e),t.offsettoplist.length?t.currentitem=t.getindex(e.y):(t.getoffsettoplist(),t.currentitem=t.offsettoplist[0],console.log("this_.offsettoplist",t.offsettoplist)),console.log("document.scroll:")})},computed:{shortcutList:function(){return this.datas.map(function(t){return t.title.substr(0,1)})}},props:{datas:{type:Array,default:[]}},methods:{selectItem:function(t){this.$emit("select",t)},colormethod:function(t){return this.currentitem&&this.currentitem.title.substr(0,1)===t?{colors:this.colors,title:this.currentitem.title}:{colors:{},title:""}},scrolltoitem:function(t,e){console.log(t,e),this.offsettoplist.length||this.getoffsettoplist();var s=this.offsettoplist[t].offsetTop;this.currentitem=this.offsettoplist[t],console.log("y",s,this.offsettoplist[t]),this.scroll.scrollTo(0,-s)},getoffsettoplist:function(){for(var t=this.datas.length,e=0;e<t;e++){var s=this.datas[e],i=this.$refs[e+"group"][0];this.offsettoplist.push({index2:e,dom:e+"group",offsetTop:i.offsetTop,title:s.title})}},getindex:function(t){for(var e={},s=!1,i=!1,o=0,n=this.offsettoplist.length,r=0;r<n;r++){var a=this.offsettoplist[r];if(a.offsetTop>-t&&(s=!0),a.offsetTop<-t&&(i=!0),s&&i){e=a,o=r;break}}e=this.offsettoplist[o-1];var l=o>n-1?this.offsettoplist[0]:this.offsettoplist[o];void 0===e&&(e=this.offsettoplist[n-1]);var c=l.offsetTop- -t;return this.offsettopabsolate=c>0&&c<=30?{left:"0px",top:-(30-c)+"px"}:{left:"0px",top:"0px"},console.log(t,"group",o,e.title,e.index2,e.offsetTop,l.offsetTop),e}}}),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"list-relative"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentitem,expression:"currentitem"}],staticClass:"fixed-title offset",style:t.offsettopabsolate},[t._v(t._s(t.currentitem.title))]),t._v(" "),s("div",{staticClass:"list-shortcut"},[s("ul",{staticClass:"list-shortcut"},t._l(t.shortcutList,function(e,i){return s("li",{key:i+"shortcut",staticClass:"item",style:t.colormethod(e).colors,on:{click:function(s){t.scrolltoitem(i,e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}))])]),t._v(" "),s("div",{ref:"singerlistview",staticClass:"recommend2"},[s("div",{ref:"listview",staticClass:"listview "},t._l(t.datas,function(e,i){return s("div",{key:i+"group",ref:i+"group",refInFor:!0},[s("div",{staticClass:"fixed-title"},[t._v(t._s(e.title))]),t._v(" "),t._l(e.items,function(e,i){return s("div",{key:i+"item",staticClass:"list-group-item",on:{click:function(s){t.selectItem(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"item.avatar"}],staticClass:"avatar"}),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(e.name))])])})],2)}))])])},staticRenderFns:[]};var l=s("VU/8")(r,a,!1,function(t){s("Iz1Z")},"data-v-98b2d164",null).exports,c=s("Sgn/"),f=s("T452"),u=s("Zrlr"),p=s.n(u),h=function t(e){var s=e.id,i=e.name;p()(this,t),this.id=s,this.name=i,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+s+".jpg?max_age=2592000"},d=s("9rMa"),m={name:"Singer",components:{ListView:l},data:function(){return{singers:[]}},created:function(){this._getSingerList()},methods:o()({selectSinger:function(t){this.$router.push({path:"/singer/"+t.id}),console.log("------singer",t),this.setSinger(t)},_getSingerList:function(){var t=this;Object(c.b)().then(function(e){console.log("singers_getSingerList_res",e),e.code===f.a&&(t.singers=t._normalizeSinger(e.data.list))})},_normalizeSinger:function(t){var e={hot:{title:"热门",items:[]}};t.forEach(function(t,s){s<10&&e.hot.items.push(new h({name:t.Fsinger_name,id:t.Fsinger_mid}));var i=t.Findex;e[i]||(e[i]={title:i,items:[]}),e[i].items.push(new h({name:t.Fsinger_name,id:t.Fsinger_mid}))});var s=[],i=[];for(var o in e){var n=e[o];n.title.match(/[a-zA-Z]/)?s.push(n):"热门"===n.title&&i.push(n)}return s.sort(function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)}),i.concat(s)}},Object(d.c)({setSinger:"SET_SINGER"}))},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"singer",staticClass:"singer"},[e("list-view",{ref:"list",attrs:{datas:this.singers},on:{select:this.selectSinger}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var g=s("VU/8")(m,v,!1,function(t){s("YfXH")},"data-v-c66cffc6",null);e.default=g.exports},"3Q4o":function(t,e,s){"use strict";e.a=function(t,e){if(function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}(t,e))return;var s=t.className.split(" ");s.push(e),t.className=s.join(" ")};var i=document.createElement("div").style;!function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==i[t[e]])return e}()},Dd8w:function(t,e,s){"use strict";e.__esModule=!0;var i,o=s("woOf"),n=(i=o)&&i.__esModule?i:{default:i};e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}},Iz1Z:function(t,e){},"Sgn/":function(t,e,s){"use strict";e.b=function(){var t=o()({},r.b,{channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"});return Object(n.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",t,r.c)},e.a=function(t){var e=o()({},r.b,{hostUin:0,needNewCode:0,platform:"yqq",order:"listen",begin:0,num:80,songstatus:1,singermid:t});return Object(n.a)("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",e,r.c)};var i=s("woOf"),o=s.n(i),n=s("Gak4"),r=s("T452")},YfXH:function(t,e){},Zrlr:function(t,e,s){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}});
//# sourceMappingURL=3.e4644e01c28728479294.js.map